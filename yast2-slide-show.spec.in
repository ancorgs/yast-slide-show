@HEADER-COMMENT@

@HEADER@
Group:	Metapackages
License: GPL v2 or later
BuildRequires:	pkgconfig yast2-devtools gnome-doc-utils docbook_4 sgml-skel
BuildArchitectures:	noarch
Summary:	YaST2 - Slide Show
Source10:       slideshow-po.tar.gz
Source12:       slideshow-sled-po.tar.gz
%description
The slide show displayed during package installation with YaST2.

%package SuSELinux
Summary:	YaST2 - Slide Show (SuSE Linux)
Group:		Metapackages

%description SuSELinux
The slide show displayed during package installation with YaST2.

%package SLES
Summary:	YaST2 - Slide Show (Enterprise Server)
Group:		Metapackages

%description SLES
A slide show displayed during package installation with YaST2.

%package SLED
Summary:	YaST2 - Slide Show (SUSE Linux Enterprise Desktop)
Group:		Metapackages

%description SLED
The slide show displayed during package installation with YaST2.

@PREP@
pushd SuSELinux
tar xf %{S:10}
langs=$(tar tf %{S:10}|sed 's=.*po/==;s=\.po$==;/^$/d'|sort -u|fmt -w1000)
for f in Makefile.{am,in}; do
  sed -i "s|^langs *=.*$|langs = en $langs|" $f
done
popd

pushd SLED
tar xf %{S:12}
langs=$(tar tf %{S:12}|sed 's=.*po/==;s=\.po$==;/^$/d'|sort -u|fmt -w1000)
for f in Makefile.{am,in}; do
  sed -i "s|^langs *=.*$|langs = en $langs|" $f
done
popd

@BUILD@
./tools/check_utf-8
# on OS use the openSUSE logo everywhere; see # 216562
%if %suse_version >= 1020
for f in SuSELinux/txt/*/01*.rtf; do
  sed -i 's/01_welcome.png/02_opensuse.png/' $f
done
%endif


@INSTALL@
# Get rid of README files etc. auto-created by yast2-devtools
# (but useless for this special package)
/bin/rm -rf ${RPM_BUILD_ROOT}/usr/share/doc/packages/yast2-slide-show

# Get rid of test environment during autobuild
/bin/rm -rf ${RPM_BUILD_ROOT}/usr/share/YaST2/clients/slide-show.ycp
/bin/rm -rf ${RPM_BUILD_ROOT}/usr/share/YaST2/modules/SlideTester.ycp

@CLEAN@

%files SuSELinux
%defattr(-,root,root)
%dir /SuSE
%dir /SuSE/SuSE
%dir /SuSE/SuSE/CD1
%dir /SuSE/SuSE/CD1/suse
%dir /SuSE/SuSE/CD1/suse/setup
%dir /SuSE/SuSE/CD1/suse/setup/slide
/SuSE/SuSE/CD1/suse/setup/slide/*

%files SLES
%defattr(-,root,root)
%dir /SuSE
%dir /SuSE/SuSE-SLES
%dir /SuSE/SuSE-SLES/CD1
%dir /SuSE/SuSE-SLES/CD1/suse
%dir /SuSE/SuSE-SLES/CD1/suse/setup
%dir /SuSE/SuSE-SLES/CD1/suse/setup/slide
/SuSE/SuSE-SLES/CD1/suse/setup/slide/*

%files SLED
%defattr(-,root,root)
%dir /SuSE
%dir /SuSE/SuSE-SLED
%dir /SuSE/SuSE-SLED/CD1
%dir /SuSE/SuSE-SLED/CD1/suse
%dir /SuSE/SuSE-SLED/CD1/suse/setup
%dir /SuSE/SuSE-SLED/CD1/suse/setup/slide
/SuSE/SuSE-SLED/CD1/suse/setup/slide/*
